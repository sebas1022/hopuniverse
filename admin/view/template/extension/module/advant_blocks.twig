{{ header }}{{ column_left }}
<div id="content">
  <div class="page-header">
    <div class="container-fluid">
      <div class="pull-right">
        <button type="submit" form="form-module" data-toggle="tooltip" title="{{ button_save }}" class="btn btn-primary"><i class="fa fa-save"></i></button>
        <a href="{{ cancel }}" data-toggle="tooltip" title="{{ button_cancel }}" class="btn btn-default"><i class="fa fa-reply"></i></a></div>
      <h1>{{ heading_title }}</h1>
      <ul class="breadcrumb">
        {% for breadcrumb in breadcrumbs %}
        <li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
        {% endfor %}
      </ul>
    </div>
  </div>
  <div class="container-fluid">
    {% if error_warning %}
    <div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i> {{ error_warning }}
      <button type="button" class="close" data-dismiss="alert">&times;</button>
    </div>
    {% endif %}
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title"><i class="fa fa-pencil"></i>Edit</h3>
      </div>
      <div class="panel-body">
        <form action="{{ action }}" method="post" enctype="multipart/form-data" id="form-module" class="form-horizontal">
          <div class="form-group">
            <label class="col-sm-2 control-label" for="input-name">Name</label>
            <div class="col-sm-10">
              <input type="text" name="name" value="{{ name }}" placeholder="{{ entry_name }}" id="input-name" class="form-control" />
              {% if error_name %}
              <div class="text-danger">{{ error_name }}</div>
              {% endif %}
            </div>
          </div>
          <div class="tab-pane">
            <ul class="nav nav-tabs" id="language">
              {% for language in languages %}
              <li><a href="#language{{ language.language_id }}" data-toggle="tab"><img src="language/{{ language.code }}/{{ language.code }}.png" title="{{ language.name }}" /> {{ language.name }}</a></li>
              {% endfor %}
            </ul>
            <div class="tab-content">
			 {% set image_row = 0 %}
              {% for language in languages %}
              <div class="tab-pane" id="language{{ language.language_id }}">
                <div class="form-group">
                  <label class="col-sm-2 control-label" for="input-title{{ language.language_id }}">Title</label>
                  <div class="col-sm-10">
                    <input type="text" name="module_description[{{ language.language_id }}][title]" placeholder="{{ entry_title }}" id="input-heading{{ language.language_id }}" value="{{ module_description[language.language_id] ? module_description[language.language_id].title }}" class="form-control" />
                  </div>
                </div>
				<div class="form-group">
                  <label class="col-sm-2 control-label" for="input-column{{ language.language_id }}">Columns count 12/</label>
                  <div class="col-sm-10">
                    <input type="number" name="module_description[{{ language.language_id }}][column]" placeholder="{{ entry_column }}" id="input-column{{ language.language_id }}" class="form-control" value="{{ module_description[language.language_id] ? module_description[language.language_id].column }}" min="1" max="12">
                  </div>
                </div>
				<div class="form-group">
				<label class="col-sm-2 control-label" >{{ entry_blocks }}</label>
				<div class="col-sm-10">
				<table id="images{{ language.language_id }}" class="table table-striped table-bordered table-hover">
                <tbody>
                  {% if module_description[language.language_id].blocks %}
                  {% for block in module_description[language.language_id].blocks %}
                  <tr id="image-row{{ image_row }}">
				  <td class="text-center" style="width:120px"><a href="" id="thumb-image{{ image_row }}" data-toggle="image" class="img-thumbnail"><img src="{% if block.image %}/image/{{ block.image }}{% else %}{{ placeholder }}{% endif %}" alt="" title="" data-placeholder="Image" class="img-responsive"/></a>
                      <input type="hidden" name="module_description[{{ language.language_id }}][blocks][{{ image_row }}][image]" value="{{ block.image }}" id="input-image{{ image_row }}" /></td>
				  <td class="text-left">
					<p><input type="text" name="module_description[{{ language.language_id }}][blocks][{{ image_row }}][title]" value="{{ block.title }}" placeholder="{{ text_title }}" class="form-control" /></p>
					<textarea name="module_description[{{ language.language_id }}][blocks][{{ image_row }}][description]"  placeholder="{{ text_title }}" class="form-control">{{ block.description }}</textarea></td>
                    <td class="text-left" style="width:56px"><button type="button" onclick="$('#image-row{{ image_row }}, .tooltip').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>
                  </tr>
                  {% set image_row = image_row + 1 %}
                  {% endfor %}
                  {% endif %}
                </tbody>
                <tfoot>
                  <tr>
                    <td colspan="2"></td>
                    <td class="text-left" style="width:56px"><button type="button" onclick="addImage('{{ language.language_id }}');" data-toggle="tooltip" title="{{ button_banner_add }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td>
                  </tr>
                </tfoot>
              </table></div>
				</div>
              </div>
              {% endfor %}
            </div>
          </div>
		  <div class="form-group">
            <label class="col-sm-2 control-label" for="input-align">{{ text_align }}</label>
            <div class="col-sm-10">
              <select name="align" id="input-align" class="form-control">
                {% if align=='center' %}
                <option value="left">{{ entry_leftmedia }}</option>
                <option value="center" selected="selected">{{ entry_centermedia }}</option>
                {% else %}
                <option value="left" selected="selected">{{ entry_leftmedia }}</option>
                <option value="center">{{ entry_centermedia }}</option>
                {% endif %}
              </select>
            </div>
          </div>
		  <div class="form-group">
            <label class="col-sm-2 control-label">{{ entry_dimension }}</label>
            <div class="col-sm-10">
			<div class="row">
				<div class="col-sm-6">
					<label for="input-width">{{ entry_dimension }}</label>
					<input type="text" name="width" value="{{ width }}" placeholder="{{ entry_width }}" id="input-width" class="form-control" />
					{% if error_width %}
						<div class="text-danger">{{ error_width }}</div>
					{% endif %}
				</div>
				<div class="col-sm-6">
					 <label for="input-height">{{ entry_height }}</label>
					 <input type="text" name="height" value="{{ height }}" placeholder="{{ entry_height }}" id="input-height" class="form-control" />
					{% if error_height %}
					<div class="text-danger">{{ error_height }}</div>
						{% endif %}
				</div>
			</div>
			<em>{{ text_size }}</em>
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-2 control-label" for="input-status">{{ entry_status }}</label>
            <div class="col-sm-10">
              <select name="status" id="input-status" class="form-control">
                {% if status %}
                <option value="1" selected="selected">{{ text_enabled }}</option>
                <option value="0">{{ text_disabled }}</option>
                {% else %}
                <option value="1">{{ text_enabled }}</option>
                <option value="0" selected="selected">{{ text_disabled }}</option>
                {% endif %}
              </select>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
   <script type="text/javascript"><!--
var image_row = {{ image_row }};

function addImage(language_id) {
	html  = '<tr id="image-row' + image_row + '">';
	html += '  <td class="text-center" style="width:120px"><a href="" id="thumb-image' + image_row + '" data-toggle="image" class="img-thumbnail"><img src="{{ placeholder }}" alt="" title="" data-placeholder="{{ placeholder }}" /></a><input type="hidden" name="module_description[' + language_id + '][blocks][' + image_row + '][image]" value="" id="input-image' + image_row + '" /></td>';
    html += '  <td class="text-left"><p><input type="text" name="module_description[' + language_id + '][blocks][' + image_row + '][title]" value="" placeholder="{{ entry_title }}" class="form-control" /></p><textarea name="module_description[' + language_id + '][blocks][' + image_row + '][description]" placeholder="{{ entry_description }}" class="form-control"></textarea></td>';		
	html += '  <td class="text-left" style="width:56px"><button type="button" onclick="$(\'#image-row' + image_row  + ', .tooltip\').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
	html += '</tr>';
	
	$('#images' + language_id + ' tbody').append(html);
	
	image_row++;
}
//--></script> 
  <script type="text/javascript"><!--
$('#language a:first').tab('show');
//--></script>
<style>
.img-thumbnail img{
width:100px;
height:auto;}</style></div>
{{ footer }}