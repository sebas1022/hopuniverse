{{ header }}
<div class="container">
<div class="row">
<h1 class="title">{{ heading_title }}</h1>
<div class="product-flex">
{% if thumb or images %}
<ul class="thumbnails">
{% if thumb %}
<li class="image-main">
<a class="thumbnail {% if (quantity < 1) %}nostock{% endif %}" data-fancybox="gallery" href="{{ popup }}" title="{{ heading_title }}"><img src="{{ thumb }}" title="{{ heading_title }}" alt="{{ heading_title }}" /></a>
</li> {% endif %}
{% if images %}
{% for image in images %}
<li class="image-additional">
<a class="thumbnail {% if (quantity < 1) %}nostock{% endif %}" data-fancybox="gallery" href="{{ image.popup }}" title="{{ heading_title }}"> <img src="{{ image.thumb }}" title="{{ heading_title }}" alt="{{ heading_title }}" /></a>
</li> {% endfor %}
{% endif %}</ul>
{% endif %}
<div class="relative">
<div class="fix">
<ul class="list-unstyled">
{% if (manufacturer) %} 
<li>{{ text_manufacturer }} <a href="{{ manufacturers }}">{{ manufacturer }}</a></li>
{% endif %} 
<li>{{ text_model }} {{ model }}</li>
{% if (reward) %} 
<li>{{ text_reward }} {{ reward }}</li>
{% endif %} 
<li>{{ text_stock }} {{ stock }}</li>
</ul>
{% if (price) %} 
<ul class="list-unstyled">
{% if (not special) %} 
<li class="price">
 <h2>{{ price }}</h2>
</li>
{% else %} 
<li class="price"><h2>{{ special }}</h2><span style="text-decoration: line-through; margin-left: 10px;">{{ price }}</span></li>
{% endif %} 
{% if (tax) %} 
<li>{{ text_tax }} {{ tax }}</li>
{% endif %} 
{% if (points) %} 
<li>{{ text_points }} {{ points }}</li>
{% endif %} 
{% if (discounts) %} 
<li>
<hr>
</li>
{% for discount in discounts %} 
<li>{{ discount['quantity'] }}{{ text_discount }}{{ discount['price'] }}</li>
{% endfor %} 
{% endif %} 
</ul>
{% endif %} 
<div id="product">
{% if options %}
<hr>
<h3>{{ text_option }}</h3>
{% for option in options %}
{% if option.type == 'select' %}
<div class="form-group{% if option.required %} required {% endif %}">
<label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
<select name="option[{{ option.product_option_id }}]" id="input-option{{ option.product_option_id }}" class="form-control">
<option value="">{{ text_select }}</option>
{% for option_value in option.product_option_value %}
<option value="{{ option_value.product_option_value_id }}">{{ option_value.name }}
{% if option_value.price %}
({{ option_value.price_prefix }}{{ option_value.price }})
{% endif %} 
</option>
{% endfor %}
</select>
</div>
{% endif %}
{% if option.type == 'radio' %}
<div class="form-group{% if option.required %} required {% endif %}">
<label class="control-label">{{ option.name }}</label>
<div id="input-option{{ option.product_option_id }}">
{% for option_value in option.product_option_value %}
<div class="radio">
<label>
<input type="radio" name="option[{{ option.product_option_id }}]" value="{{ option_value.product_option_value_id }}" />
{% if option_value.image %} <img src="{{ option_value.image }}" alt="{{ option_value.name }} {% if option_value.price %} {{ option_value.price_prefix }} {{ option_value.price }} {% endif %}" class="img-thumbnail" /> {% endif %}
{{ option_value.name }}
{% if option_value.price %}
({{ option_value.price_prefix }}{{ option_value.price }})
{% endif %} </label>
</div>
{% endfor %} 
</div>
</div>
{% endif %}
{% if option.type == 'checkbox' %}
<div class="form-group{% if option.required %} required {% endif %}">
<label class="control-label">{{ option.name }}</label>
<div id="input-option{{ option.product_option_id }}">
{% for option_value in option.product_option_value %}
<div class="checkbox">
<label>
<input type="checkbox" name="option[{{ option.product_option_id }}][]" value="{{ option_value.product_option_value_id }}" />
{% if option_value.image %} <img src="{{ option_value.image }}" alt="{{ option_value.name }} {% if option_value.price %} {{ option_value.price_prefix }} {{ option_value.price }} {% endif %}" class="img-thumbnail" /> {% endif %}
{{ option_value.name }}
{% if option_value.price %}
({{ option_value.price_prefix }}{{ option_value.price }})
{% endif %} </label>
</div>
{% endfor %} 
</div>
</div>
{% endif %}
{% if option.type == 'text' %}
<div class="form-group{% if option.required %} required {% endif %}">
<label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
<input type="text" name="option[{{ option.product_option_id }}]" value="{{ option.value }}" placeholder="{{ option.name }}" id="input-option{{ option.product_option_id }}" class="form-control" />
</div>
{% endif %}
{% if option.type == 'textarea' %}
<div class="form-group{% if option.required %} required {% endif %}">
<label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
<textarea name="option[{{ option.product_option_id }}]" rows="5" placeholder="{{ option.name }}" id="input-option{{ option.product_option_id }}" class="form-control">{{ option.value }}</textarea>
</div>
{% endif %}
{% if option.type == 'file' %}
<div class="form-group{% if option.required %} required {% endif %}">
<label class="control-label">{{ option.name }}</label>
<button type="button" id="button-upload{{ option.product_option_id }}" data-loading-text="{{ text_loading }}" class="btn btn-default btn-block"><i class="fa fa-upload"></i> {{ button_upload }}</button>
<input type="hidden" name="option[{{ option.product_option_id }}]" value="" id="input-option{{ option.product_option_id }}" />
</div>
{% endif %}
{% if option.type == 'date' %}
<div class="form-group{% if option.required %} required {% endif %}">
<label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
<div class="input-group date">
<input type="text" name="option[{{ option.product_option_id }}]" value="{{ option.value }}" data-date-format="YYYY-MM-DD" id="input-option{{ option.product_option_id }}" class="form-control" />
<span class="input-group-btn">
<button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
</span>
</div>
</div>
{% endif %}
{% if option.type == 'datetime' %}
<div class="form-group{% if option.required %} required {% endif %}">
<label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
<div class="input-group datetime">
<input type="text" name="option[{{ option.product_option_id }}]" value="{{ option.value }}" data-date-format="YYYY-MM-DD HH:mm" id="input-option{{ option.product_option_id }}" class="form-control" />
<span class="input-group-btn">
<button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
</span>
</div>
</div>
{% endif %}
{% if option.type == 'time' %}
<div class="form-group{% if option.required %} required {% endif %}">
<label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
<div class="input-group time">
<input type="text" name="option[{{ option.product_option_id }}]" value="{{ option.value }}" data-date-format="HH:mm" id="input-option{{ option.product_option_id }}" class="form-control" />
<span class="input-group-btn">
<button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
</span>
</div>
</div>
{% endif %}
{% endfor %}
{% endif %}
{% if recurrings %}
<hr>
<h3>{{ text_payment_recurring }}</h3>
<div class="form-group required">
<select name="recurring_id" class="form-control">
<option value="">{{ text_select }}</option>
{% for recurring in recurrings %}
<option value="{{ recurring.recurring_id }}">{{ recurring.name }}</option>
{% endfor %}
</select>
<div class="help-block" id="recurring-description"></div>
</div>
{% endif %}
<div class="form-group">
<div class="product-input">
<div class="input-group plus-minus">
<span class="input-group-btn">
<button class="btn btn-default" data-dir="dwn"><i class="fa fa-minus" aria-hidden="true"></i></button>
</span>
<input type="text" name="quantity" value="{{ minimum }}" id="input-quantity" class="form-control text-center" />
<span class="input-group-btn">
<button class="btn btn-default" data-dir="up"><i class="fa fa-plus" aria-hidden="true"></i></button>
</span>
</div>
<input type="hidden" name="product_id" value="{{ product_id }}" />
<br />
<button type="button" id="button-cart" data-loading-text="{{ text_loading }}" class="btn btn-default btn-lg">{{ button_cart }}</button>
</div>
</div>
{% if (minimum > 1) %} 
<div class="alert alert-info"><i class="fa fa-info-circle"></i> {{ text_minimum }}</div>
{% endif %} 
</div>
{% if (review_status) %} 
<div class="rating">
<p>
{% set i = 1 %}{% for i in i..5 %} 
{% if (rating < i) %} 
<span class="fa fa-stack"><i class="fa fa-star-o fa-stack-1x"></i></span>
{% else %} 
<span class="fa fa-stack"><i class="fa fa-star fa-stack-1x"></i><i class="fa fa-star-o fa-stack-1x"></i></span>
{% endif %} 
{% endfor %} 
<a href="" onclick="$('a[href=\'#tab-review\']').trigger('click'); return false;">{{ reviews }}</a> / <a href="" onclick="$('a[href=\'#tab-review\']').trigger('click'); return false;">{{ text_write }}</a></p>
</div>
{% endif %} 
</div>  
</div>
<div class="col-sm-12">
<ul class="nav nav-tabs">
<li class="active"><a href="#tab-description" data-toggle="tab">{{ tab_description }}</a></li>
{% if (attribute_groups) %} 
<li><a href="#tab-specification" data-toggle="tab">{{ tab_attribute }}</a></li>
{% endif %} 
{% if (review_status) %} 
<li><a href="#tab-review" data-toggle="tab">{{ tab_review }}</a></li>
{% endif %} 
</ul>
<div class="tab-content">
<div class="tab-pane active" id="tab-description">{{ description }}</div>
{% if (attribute_groups) %} 
<div class="tab-pane" id="tab-specification">
<table class="table table-bordered">
{% for attribute_group in attribute_groups %} 
<thead>
<tr>
<td colspan="2"><strong>{{ attribute_group['name'] }}</strong></td>
</tr>
</thead>
<tbody>
{% for attribute in attribute_group['attribute'] %} 
<tr>
<td>{{ attribute['name'] }}</td>
<td>{{ attribute['text'] }}</td>
</tr>
{% endfor %} 
</tbody>
{% endfor %} 
</table>
</div>
{% endif %} 
{% if (review_status) %} 
<div class="tab-pane" id="tab-review">
<form class="form-horizontal" id="form-review">
<div id="review"></div>
<h2>{{ text_write }}</h2>
{% if (review_guest) %} 
<div class="form-group required">
<div class="col-sm-12">
<label class="control-label" for="input-name">{{ entry_name }}</label>
<input type="text" name="name" value="{{ customer_name }}" id="input-name" class="form-control" />
</div>
</div>
<div class="form-group required">
<div class="col-sm-12">
<label class="control-label" for="input-review">{{ entry_review }}</label>
<textarea name="text" rows="5" id="input-review" class="form-control"></textarea>
<div class="help-block">{{ text_note }}</div>
</div>
</div>
<div class="form-group required">
<div class="col-sm-12">
<label class="control-label">{{ entry_rating }}</label>
<div class="stars-rating">
<input name="rating" id="s_rating" value="0" type="hidden">
<div class="wrap" data-rate="0">
<span data-rate="1"></span>
<span data-rate="2"></span>
<span data-rate="3"></span>
<span data-rate="4"></span>
<span data-rate="5"></span>
</div>
</div>
</div>
</div>
{{ captcha }} 
<div class="buttons clearfix">
<div class="pull-right">
<button type="button" id="button-review" data-loading-text="{{ text_loading }}" class="btn btn-primary">{{ button_continue }}</button>
</div>
</div>
{% else %} 
{{ text_login }} 
{% endif %} 
</form>
</div>
{% endif %} 
</div>
</div>
</div>
{{ content_bottom }}</div>
</div></div>
<script type="text/javascript">
<!--
$('select[name=\'recurring_id\'], input[name="quantity"]').change(function() {
$.ajax({
url: 'index.php?route=product/product/getRecurringDescription',
type: 'post',
data: $('input[name=\'product_id\'], input[name=\'quantity\'], select[name=\'recurring_id\']'),
dataType: 'json',
beforeSend: function() {
$('#recurring-description').html('');
},
success: function(json) {
$('.alert-dismissible, .text-danger').remove();
if(json['success']) {
$('#recurring-description').html(json['success']);
}
}
});
});
//-->
</script><script type="text/javascript"><!--
$('#button-cart').on('click', function() {
	$.ajax({
		url: 'index.php?route=checkout/cart/add',
		type: 'post',
		data: $('#product input[type=\'text\'], #product input[type=\'hidden\'], #product input[type=\'radio\']:checked, #product input[type=\'checkbox\']:checked, #product select, #product textarea'),
		dataType: 'json',
		beforeSend: function() {
			$('#button-cart').button('loading');
		},
		complete: function() {
			$('#button-cart').button('reset');
		},
		success: function(json) {
			$('.alert-dismissible, .text-danger').remove();
			$('.form-group').removeClass('has-error');

			if (json['error']) {
				if (json['error']['option']) {
					for (i in json['error']['option']) {
						var element = $('#input-option' + i.replace('_', '-'));

						if (element.parent().hasClass('input-group')) {
							element.parent().after('<div class="text-danger">' + json['error']['option'][i] + '</div>');
						} else {
							element.after('<div class="text-danger">' + json['error']['option'][i] + '</div>');
						}
					}
				}

				if (json['error']['recurring']) {
					$('select[name=\'recurring_id\']').after('<div class="text-danger">' + json['error']['recurring'] + '</div>');
				}

				// Highlight any found errors
				$('.text-danger').parent().addClass('has-error');
			}

			if (json['success']) {
				$('.product-flex').after('<div class="alert alert-success alert-dismissible">' + json['success'] + '<button type="button" class="close" data-dismiss="alert">&times;</button></div>');

$("#cart > button").html('<svg width="24px" height="26px" viewBox="0 0 24 26" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="cart" fill="var(--text2)" fill-rule="nonzero"><path d="M12,0 C9.253906,0 7,2.253906 7,5 L7,6 L2.0625,6 L2,6.9375 L1,24.9375 L0.9375,26 L23.0625,26 L23,24.9375 L22,6.9375 L21.9375,6 L17,6 L17,5 C17,2.253906 14.746094,0 12,0 Z M12,2 C13.65625,2 15,3.34375 15,5 L15,6 L9,6 L9,5 C9,3.34375 10.34375,2 12,2 Z M3.9375,8 L7,8 L7,11 L9,11 L9,8 L15,8 L15,11 L17,11 L17,8 L20.0625,8 L20.9375,24 L3.0625,24 L3.9375,8 Z" id="Shape"></path></g></g></svg><span id="cart-total">' + json['total'] + "</span>");
				$('html, body').animate({ scrollTop: 0 }, 'slow');

				$('#cart > ul').load('index.php?route=common/cart/info ul li');
			}
		},
        error: function(xhr, ajaxOptions, thrownError) {
            alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
        }
	});
});
//--></script> 
<script type="text/javascript">
<!--
$('.date').datetimepicker({
language: '{{ datepicker }}',
pickTime: false
});
$('.datetime').datetimepicker({
language: '{{ datepicker }}',
pickDate: true,
pickTime: true
});
$('.time').datetimepicker({
language: '{{ datepicker }}',
pickDate: false
});
$('button[id^=\'button-upload\']').on('click', function() {
var node = this;
$('#form-upload').remove();
$('body').prepend('<form enctype="multipart/form-data" id="form-upload" style="display: none;"><input type="file" name="file" /></form>');
$('#form-upload input[name=\'file\']').trigger('click');
if(typeof timer != 'undefined') {
clearInterval(timer);
}
timer = setInterval(function() {
if($('#form-upload input[name=\'file\']').val() != '') {
clearInterval(timer);
$.ajax({
url: 'index.php?route=tool/upload',
type: 'post',
dataType: 'json',
data: new FormData($('#form-upload')[0]),
cache: false,
contentType: false,
processData: false,
beforeSend: function() {
$(node).button('loading');
},
complete: function() {
$(node).button('reset');
},
success: function(json) {
$('.text-danger').remove();
if(json['error']) {
$(node).parent().find('input').after('<div class="text-danger">' + json['error'] + '</div>');
}
if(json['success']) {
alert(json['success']);
$(node).parent().find('input').val(json['code']);
}
},
error: function(xhr, ajaxOptions, thrownError) {
alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
}
});
}
}, 500);
});
//-->
</script>
<script type="text/javascript">
<!--
$('#review').delegate('.pagination a', 'click', function(e) {
e.preventDefault();
$('#review').fadeOut('slow');
$('#review').load(this.href);
$('#review').fadeIn('slow');
});
$('#review').load('index.php?route=product/product/review&product_id={{ product_id }}');
$('#button-review').on('click', function() {
$.ajax({
url: 'index.php?route=product/product/write&product_id={{ product_id }}',
type: 'post',
dataType: 'json',
data: $("#form-review").serialize(),
beforeSend: function() {
$('#button-review').button('loading');
},
complete: function() {
$('#button-review').button('reset');
},
success: function(json) {
$('.alert-dismissible').remove();
if(json['error']) {
$('#review').after('<div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i> ' + json['error'] + '</div>');
}
if(json['success']) {
$('#review').after('<div class="alert alert-success alert-dismissible"><i class="fa fa-check-circle"></i> ' + json['success'] + '</div>');
$('input[name=\'name\']').val('');
$('textarea[name=\'text\']').val('');
$('input[name=\'rating\']:checked').prop('checked', false);
}
}
});
});
//-->
</script>
<script>
$(document).on('click', '.plus-minus button', function() {
var btn = $(this),
oldValue = btn.closest('.plus-minus').find('input').val().trim(),
newVal = 1;
if(btn.attr('data-dir') == 'up') {
newVal = parseInt(oldValue) + 1;
} else {
if(oldValue > 1) {
newVal = parseInt(oldValue) - 1;
} else {
newVal = 1;
}
}
btn.closest('.plus-minus').find('input').val(newVal);
});
</script>
<style>
.stars-rating label {
	display: block;
}
.stars-rating .wrap {
	display: inline-block;
	font-size: 0;
}
.stars-rating .wrap span {
	font-size: 24px;
	line-height: 20px;
	cursor: pointer;
}
.stars-rating .wrap span:before {
	content: "\2606";
	color: #bbb;
}
.stars-rating .wrap:not([data-rate="0"]) span:before {
	content: "\2605";
}
.stars-rating .wrap:hover span:before {
	content: "\2605";
	color: #fe2;
}
.stars-rating .wrap:hover span:hover ~ span:before {
	color: #bbb;
}
.stars-rating .wrap[data-rate="1"] span:nth-child(-n+1):before,
.stars-rating .wrap[data-rate="2"] span:nth-child(-n+2):before,
.stars-rating .wrap[data-rate="3"] span:nth-child(-n+3):before,
.stars-rating .wrap[data-rate="4"] span:nth-child(-n+4):before,
.stars-rating .wrap[data-rate="5"] span:nth-child(-n+5):before {
	color: #fa0;
}
</style>
<script>
$(document).ready(function(){
$('.stars-rating span').click(function(e){
var rate = $(this).attr('data-rate');
$('.stars-rating .wrap').attr('data-rate', rate);
$('#s_rating').val(rate);               
});
});
</script>
{{ footer }}